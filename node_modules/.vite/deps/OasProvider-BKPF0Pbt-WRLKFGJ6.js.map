{
  "version": 3,
  "sources": ["../../zudoku/src/lib/plugins/openapi/OasProvider.tsx"],
  "sourcesContent": ["import { useMemo } from \"react\";\nimport { Outlet } from \"react-router\";\nimport { joinPath } from \"../../util/joinPath.js\";\nimport type { GraphQLClient } from \"./client/GraphQLClient.js\";\nimport { GraphQLProvider } from \"./client/GraphQLContext.js\";\nimport { OasConfigProvider } from \"./context.js\";\nimport { type OasPluginConfig } from \"./interfaces.js\";\nimport { getVersions } from \"./util/getRoutes.js\";\n\nexport const OasProvider = ({\n  basePath,\n  version,\n  config,\n  client,\n}: {\n  basePath: string;\n  version?: string;\n  config: OasPluginConfig;\n  client: GraphQLClient;\n}) => {\n  const value = useMemo(() => {\n    const versions = getVersions(config);\n    const firstVersion = Object.values(config.input).at(0);\n    const input =\n      config.type === \"file\"\n        ? {\n            type: config.type,\n            input: version ? config.input[version]! : firstVersion!,\n          }\n        : { type: config.type, input: config.input };\n\n    return {\n      config: {\n        ...config,\n        version: version ?? versions.at(0),\n        versions: Object.fromEntries(\n          versions.map((version) => [version, joinPath(basePath, version)]),\n        ),\n        ...input,\n      },\n    };\n  }, [config, basePath, version]);\n\n  return (\n    <OasConfigProvider value={value}>\n      <GraphQLProvider client={client}>\n        <Outlet />\n      </GraphQLProvider>\n    </OasConfigProvider>\n  );\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,IAAMA,IAAc,CAAC;EAC1B,UAAAC;EACA,SAAAC;EACA,QAAAC;EACA,QAAAC;AACF,MAKM;AACE,QAAAC,QAAQC,aAAAA,SAAQ,MAAM;AACpB,UAAAC,IAAWC,GAAYL,CAAM,GAC7BM,IAAe,OAAO,OAAON,EAAO,KAAK,EAAE,GAAG,CAAC,GAC/CO,IACJP,EAAO,SAAS,SACZ;MACE,MAAMA,EAAO;MACb,OAAOD,IAAUC,EAAO,MAAMD,CAAO,IAAKO;IAAA,IAE5C,EAAE,MAAMN,EAAO,MAAM,OAAOA,EAAO,MAAM;AAExC,WAAA;MACL,QAAQ;QACN,GAAGA;QACH,SAASD,KAAWK,EAAS,GAAG,CAAC;QACjC,UAAU,OAAO;UACfA,EAAS,IAAI,CAACL,MAAY,CAACA,GAASS,GAASV,GAAUC,CAAO,CAAC,CAAC;QAClE;QACA,GAAGQ;MAAA;IAEP;EACC,GAAA,CAACP,GAAQF,GAAUC,CAAO,CAAC;AAG5B,SAAAU,GAAAA,IAACC,GAAAA,EAAkB,OAAAR,GACjB,UAAAO,GAAA,IAACE,GAAAA,EAAgB,QAAAV,GACf,UAAAQ,GAAAA,IAACG,IAAO,CAAA,CAAA,EAAA,CACV,EACF,CAAA;AAEJ;",
  "names": ["OasProvider", "basePath", "version", "config", "client", "value", "useMemo", "versions", "getVersions", "firstVersion", "input", "joinPath", "jsx", "OasConfigProvider", "GraphQLProvider", "Outlet"]
}
