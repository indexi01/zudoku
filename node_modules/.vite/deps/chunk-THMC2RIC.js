import {
  Ts,
  Wr
} from "./chunk-ALHMGBAY.js";
import {
  ListTree,
  We
} from "./chunk-VSGZQHBI.js";
import {
  ae
} from "./chunk-T7IJB7TU.js";
import {
  require_react
} from "./chunk-TJE776R7.js";
import {
  __toESM
} from "./chunk-WOOG5QLI.js";

// node_modules/zudoku/lib/Toc-BK39DQvI.js
var import_react = __toESM(require_react(), 1);
var d = "data-active";
var p = ({
  item: s,
  children: r,
  className: n,
  isActive: o
}) => ae.jsxs("li", { className: We("truncate", n), title: s.value, children: [
  ae.jsx(
    Ts,
    {
      to: `#${s.id}`,
      [d]: s.id,
      className: We(
        o ? "text-primary" : "hover:text-accent-foreground text-muted-foreground"
      ),
      children: s.value
    }
  ),
  r
] });
var R = ({ entries: s }) => {
  const { activeAnchor: r } = Wr(), n = (0, import_react.useRef)(null), o = (0, import_react.useRef)(false), [u, i] = (0, import_react.useState)({
    top: 0,
    opacity: 0
  });
  return (0, import_react.useEffect)(() => {
    if (!n.current) return;
    const t = n.current.querySelector(
      `[${d}='${r}']`
    );
    if (!t) {
      i({ top: 0, opacity: 0 });
      return;
    }
    const a = n.current.getBoundingClientRect().top, m = t.getBoundingClientRect().top;
    i({
      opacity: 1,
      top: `${m - a}px`
    }), !o.current && requestIdleCallback(() => {
      o.current = true;
    });
  }, [r]), ae.jsxs("aside", { className: "sticky scrollbar top-8 lg:top-[--header-height] h-[calc(100vh-var(--header-height))] pt-[--padding-content-top] pb-[--padding-content-bottom] overflow-y-auto ps-1 text-sm", children: [
    ae.jsxs("div", { className: "flex items-center gap-2 font-medium mb-2", children: [
      ae.jsx(ListTree, { size: 16 }),
      "On this page"
    ] }),
    ae.jsxs("div", { className: "relative ms-2 ps-4", children: [
      ae.jsx("div", { className: "absolute inset-0 right-auto bg-border w-[2px]" }),
      ae.jsx(
        "div",
        {
          className: We(
            "absolute -left-px -translate-y-1 h-6 w-[4px] rounded bg-primary",
            o.current && "ease-out [transition:top_150ms,opacity_325ms]"
          ),
          style: u
        }
      ),
      ae.jsx(
        "ul",
        {
          ref: n,
          className: "relative font-medium list-none space-y-2",
          children: s.map((t) => ae.jsx(
            p,
            {
              isActive: t.id === r,
              item: t,
              className: "pl-0",
              children: t.children && ae.jsx("ul", { className: "list-none pl-4 pt-2 space-y-2", children: t.children.map((a) => ae.jsx(
                p,
                {
                  item: a,
                  isActive: a.id === r
                },
                a.id
              )) })
            },
            t.id
          ))
        }
      )
    ] })
  ] });
};

export {
  R
};
//# sourceMappingURL=chunk-THMC2RIC.js.map
