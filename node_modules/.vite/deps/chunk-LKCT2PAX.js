import {
  $u,
  Hc,
  Ou,
  Wc,
  Xc,
  Zr,
  ie
} from "./chunk-2R5R3JQD.js";
import {
  i as i2
} from "./chunk-6IHE6QFO.js";
import {
  Lg,
  lg,
  om,
  sm
} from "./chunk-ALHMGBAY.js";
import {
  i,
  m2 as m,
  n,
  t as t2
} from "./chunk-KY3RD535.js";
import {
  Content3 as Content,
  Root3 as Root,
  Trigger3 as Trigger,
  l,
  l2,
  t
} from "./chunk-6HIU6SLM.js";
import {
  ChevronDown,
  ChevronUp,
  ChevronsLeftRight,
  Circle,
  CircleDot,
  CircleFadingPlus,
  Minus,
  Plus,
  RefreshCcwDot,
  SquareMinus,
  SquarePlus,
  We
} from "./chunk-VSGZQHBI.js";
import {
  ae
} from "./chunk-T7IJB7TU.js";
import {
  require_react
} from "./chunk-TJE776R7.js";
import {
  __toESM
} from "./chunk-WOOG5QLI.js";

// node_modules/zudoku/lib/SchemaView-DCSWtnYr.js
var import_react = __toESM(require_react(), 1);
function se(e) {
  const t3 = Wc(e) ? e : new $u(e), r = t3.body, i3 = new Xc(t3);
  let n2 = "", o = false;
  for (; i3.advance().kind !== ie.EOF; ) {
    const l3 = i3.token, m2 = l3.kind, h = !Hc(l3.kind);
    o && (h || l3.kind === ie.SPREAD) && (n2 += " ");
    const w = r.slice(l3.start, l3.end);
    m2 === ie.BLOCK_STRING ? n2 += Ou(l3.value, {
      minimize: true
    }) : n2 += w, o = h;
  }
  return n2;
}
var we = (e, ...[t3]) => {
  const r = (0, import_react.use)(i2);
  if (r === void 0)
    throw new Error("useGraphQL must be used within a GraphQLProvider");
  return {
    queryFn: () => r.fetch(e, t3),
    queryKey: [se(e.toString()), t3]
  };
};
var te = (e, t3) => e.reduce(
  (r, i3) => {
    const n2 = t3(i3);
    return r[n2] || (r[n2] = []), r[n2].push(i3), r;
  },
  {}
);
var re = ({ pattern: e }) => {
  const [t3, r] = (0, import_react.useState)(false), i3 = e.length > 20, n2 = i3 ? `${e.slice(0, 20)}…` : e;
  return ae.jsxs(
    om,
    {
      className: We("text-xs", i3 && "cursor-pointer"),
      onClick: () => r(!t3),
      selectOnClick: false,
      children: [
        t3 ? e : n2,
        i3 && ae.jsx("button", { type: "button", className: "p-1 translate-y-[2px]", children: !t3 && ae.jsx(ChevronsLeftRight, { size: 12 }) })
      ]
    }
  );
};
var ne = (e) => e ? [
  e.type === "array" && e.items.type ? `${e.items.type}[]` : Array.isArray(e.type) ? e.type.join(" | ") : e.type,
  e.enum && "enum",
  e.format,
  e.minimum && `min: ${e.minimum}`,
  e.maximum && `max: ${e.maximum}`,
  e.minLength && `minLength: ${e.minLength}`,
  e.maxLength && `maxLength: ${e.maxLength}`,
  e.minItems && `minItems: ${e.minItems}`,
  e.maxItems && `maxItems: ${e.maxItems}`,
  e.uniqueItems && "unique",
  e.minProperties && `minProps: ${e.minProperties}`,
  e.maxProperties && `maxProps: ${e.maxProperties}`,
  e.readOnly && "readOnly",
  e.writeOnly && "writeOnly",
  e.deprecated && "deprecated",
  e.pattern && ae.jsxs(ae.Fragment, { children: [
    "pattern: ",
    ae.jsx(re, { pattern: e.pattern })
  ] })
] : [];
var j = ({
  schema: e,
  extraItems: t3 = [],
  className: r
}) => {
  const i3 = [...ne(e), ...t3].flatMap(
    (n2) => typeof n2 == "string" || (0, import_react.isValidElement)(n2) ? n2 : []
  );
  return ae.jsx("span", { className: r, children: i3.map((n2, o) => ae.jsxs("span", { className: "text-muted-foreground", children: [
    n2,
    o < i3.length - 1 && ae.jsx("span", { className: "text-muted-foreground/50", children: " · " })
  ] }, o)) });
};
var y = ({
  values: e,
  className: t3,
  maxVisibleValues: r = 8
}) => {
  const [i3, n2] = (0, import_react.useState)(false);
  if (!e.length) return null;
  const o = e.length > r, l3 = o && !i3 ? e.slice(0, r) : e;
  return ae.jsxs("div", { className: We("flex flex-wrap gap-1.5 text-xs", t3), children: [
    ae.jsx("span", { className: "text-muted-foreground", children: "Enum values: " }),
    l3.map((m2) => ae.jsx("div", { children: ae.jsx(sm, { className: "border rounded px-1 font-mono", children: m2 }) }, m2)),
    o && ae.jsx(
      l2,
      {
        variant: "ghost",
        size: "sm",
        className: "h-fit px-0",
        onClick: () => n2(!i3),
        children: i3 ? ae.jsxs("div", { className: "flex items-center gap-1", children: [
          ae.jsx(ChevronUp, { size: 12 }),
          ae.jsx("span", { className: "text-muted-foreground", children: "show less" })
        ] }) : ae.jsxs("div", { className: "flex items-center gap-1", children: [
          ae.jsx(ChevronDown, { size: 12 }),
          ae.jsxs("span", { className: "text-muted-foreground", children: [
            "show ",
            e.length - r,
            " more"
          ] })
        ] })
      }
    )
  ] });
};
var N = ({
  schema: e
}) => {
  var i3;
  const t3 = (i3 = e.examples) == null ? void 0 : i3.at(0), r = e.default;
  return !t3 && !r ? null : ae.jsxs("div", { className: "flex flex-col gap-1 text-xs", children: [
    t3 && ae.jsxs("div", { children: [
      ae.jsx("span", { className: "text-muted-foreground", children: "Example: " }),
      ae.jsx(sm, { className: "border rounded px-1 font-mono", children: typeof t3 == "object" ? JSON.stringify(t3) : t3 })
    ] }),
    r && ae.jsxs("div", { children: [
      ae.jsx("span", { className: "text-muted-foreground", children: "Default: " }),
      ae.jsx(sm, { className: "border rounded px-1 font-mono", children: typeof r == "object" ? JSON.stringify(r) : r })
    ] })
  ] });
};
var ie2 = {
  AND: ae.jsx(CircleFadingPlus, { size: 16, className: "fill-card" }),
  OR: ae.jsx(CircleDot, { size: 16, className: "fill-card" }),
  ONE: ae.jsx(Circle, { size: 14, className: "fill-card" })
};
var oe = {
  AND: "text-green-500 dark:text-green-300/60",
  OR: "text-blue-400 dark:text-blue-500",
  ONE: "text-purple-500 dark:text-purple-300/60"
};
var le = ({
  type: e,
  isOpen: t3,
  className: r,
  schemeName: i3
}) => ae.jsx(
  "div",
  {
    className: We(
      oe[e],
      "relative text-sm flex py-2",
      "before:border-l before:absolute before:-top-2 before:-bottom-2 before:border-border before:border-dashed before:content-['']",
      r
    ),
    children: ae.jsxs("div", { className: "-translate-x-[7px] flex gap-1 items-center", children: [
      ie2[e],
      ae.jsx(
        "div",
        {
          className: We(
            "translate-y-px mx-px opacity-0 group-hover:opacity-100 transition",
            !t3 && "-rotate-90"
          ),
          children: ae.jsx(ChevronDown, { size: 16 })
        }
      ),
      ae.jsx("span", { className: "text-sm text-foreground", children: i3 })
    ] })
  }
);
var ae2 = (e) => {
  const [t3, r] = (0, import_react.useState)(true);
  return ae.jsxs(
    Root,
    {
      open: t3,
      onOpenChange: () => r((i3) => !i3),
      className: "group",
      children: [
        ae.jsx(Trigger, { children: ae.jsx(
          le,
          {
            type: e.type,
            isOpen: t3,
            schemeName: e.schema.title
          }
        ) }),
        !t3 && ae.jsx("div", { className: "wavy-line bg-border translate-y-1" }),
        ae.jsx(Content, { children: ae.jsx(x, { schema: e.schema }) })
      ]
    }
  );
};
var de = {
  AND: "All of",
  OR: "Any of",
  ONE: "One of"
};
var ce = ({
  schemas: e,
  type: t3,
  isOpen: r,
  toggleOpen: i3
}) => ae.jsx(Root, { open: r, onOpenChange: i3, asChild: true, children: ae.jsxs(t2, { className: "px-6", children: [
  ae.jsxs(Trigger, { className: "flex gap-2 items-center py-2 w-full text-sm text-muted-foreground -translate-x-1.5", children: [
    r ? ae.jsx(SquareMinus, { size: 14 }) : ae.jsx(SquarePlus, { size: 14 }),
    ae.jsx("span", { children: de[t3] })
  ] }),
  ae.jsx(Content, { className: "pb-4", children: e.map((n2, o) => (
    // eslint-disable-next-line react/no-array-index-key
    ae.jsx(ae2, { type: t3, schema: n2 }, o)
  )) })
] }) });
var xe = (e) => typeof e == "string" && ["string", "number", "boolean", "integer", "null"].includes(e);
var pe = (e) => e.type === "object" && Object.keys(e.properties ?? {}).length > 0 || e.type === "array" && typeof e.items == "object" && (!e.items.type || e.items.type === "object");
var b = (e) => !!(e.oneOf ?? e.allOf ?? e.anyOf);
var me = {
  allOf: "AND",
  anyOf: "OR",
  oneOf: "ONE"
};
var g = (e) => e === Zr;
var P = ({ schema: e }) => {
  const [t3, r] = (0, import_react.useState)(true), i3 = (0, import_react.useCallback)(() => r((n2) => !n2), []);
  for (const [n2, o] of t(me))
    if (e[n2])
      return ae.jsx(
        ce,
        {
          schemas: e[n2],
          type: o,
          isOpen: t3,
          toggleOpen: i3
        }
      );
};
var C = () => ae.jsxs(
  om,
  {
    className: "inline-flex items-center gap-1.5 italic text-xs translate-y-0.5",
    selectOnClick: false,
    children: [
      ae.jsx(RefreshCcwDot, { size: 13 }),
      ae.jsx("span", { children: "circular" })
    ]
  }
);
var ue = ({
  name: e,
  schema: t3,
  group: r,
  defaultOpen: i3 = false,
  showCollapseButton: n2 = true
}) => {
  const [o, l3] = (0, import_react.useState)(i3);
  return g(t3) ? ae.jsx("li", { className: "p-4 bg-border/20 hover:bg-border/30", children: ae.jsxs("div", { className: "flex flex-col gap-2.5 justify-between text-sm", children: [
    ae.jsxs("div", { className: "space-x-2", children: [
      ae.jsx("code", { children: e }),
      ae.jsx(
        j,
        {
          schema: t3,
          extraItems: [ae.jsx(C, {}, "circular-ref")]
        }
      )
    ] }),
    ae.jsx(N, { schema: t3 })
  ] }) }) : ae.jsx("li", { className: "p-4 bg-border/20 hover:bg-border/30", children: ae.jsxs("div", { className: "flex flex-col gap-2.5 justify-between text-sm", children: [
    ae.jsxs("div", { className: "space-x-2", children: [
      ae.jsx(sm, { asChild: true, children: ae.jsx("code", { children: e }) }),
      ae.jsx(
        j,
        {
          schema: t3,
          extraItems: [
            r !== "optional" && ae.jsx("span", { className: "text-primary", children: "required" }),
            t3.type === "array" && "items" in t3 && g(t3.items) && ae.jsx(C, {})
          ]
        }
      )
    ] }),
    t3.description && ae.jsx(
      lg,
      {
        className: We(Lg, "text-sm leading-normal line-clamp-4"),
        content: t3.description
      }
    ),
    t3.type === "array" && "items" in t3 && t3.items.enum && ae.jsx(y, { values: t3.items.enum }),
    t3.enum && ae.jsx(y, { values: t3.enum }),
    ae.jsx(N, { schema: t3 }),
    (b(t3) || pe(t3)) && ae.jsxs(
      Root,
      {
        defaultOpen: i3,
        open: o,
        onOpenChange: () => l3(!o),
        children: [
          n2 && ae.jsx(Trigger, { asChild: true, children: ae.jsxs(l, { variant: "expand", size: "sm", className: "h-7", children: [
            o ? ae.jsx(Minus, { size: 12 }) : ae.jsx(Plus, { size: 12 }),
            o ? "Hide properties" : "Show properties"
          ] }) }),
          ae.jsx(Content, { children: ae.jsx("div", { className: "mt-2", children: b(t3) ? ae.jsx(P, { schema: t3 }) : t3.type === "object" ? ae.jsx(x, { schema: t3 }) : t3.type === "array" && "items" in t3 && typeof t3.items == "object" && !g(t3.items) && ae.jsx(x, { schema: t3.items }) }) })
        ]
      }
    )
  ] }) });
};
var je = (e) => e && ae.jsx(
  lg,
  {
    className: We(Lg, "text-sm leading-normal line-clamp-4"),
    content: e
  }
);
var fe = (e) => ae.jsxs(t2, { className: "p-4 space-y-2", children: [
  ae.jsx("span", { className: "text-sm text-muted-foreground", children: ae.jsx(j, { schema: e }) }),
  e.enum && ae.jsx(y, { values: e.enum }),
  je(e.description),
  ae.jsx(N, { schema: e })
] });
var x = ({
  schema: e,
  defaultOpen: t3 = false
}) => {
  if (!e || Object.keys(e).length === 0)
    return ae.jsx(t2, { className: "p-4", children: ae.jsx("span", { className: "text-sm text-muted-foreground italic", children: "No schema specified" }) });
  if (b(e))
    return ae.jsx(P, { schema: e });
  if (xe(e.type))
    return fe(e);
  if (e.type === "array" && typeof e.items == "object")
    return ae.jsxs(t2, { className: "p-4 space-y-2 text-sm", children: [
      ae.jsx(j, { schema: e }),
      ae.jsx(x, { schema: e.items })
    ] });
  if (e.type === "object") {
    const r = te(
      Object.entries(e.properties ?? {}),
      ([n2, o]) => {
        var l3;
        return o.deprecated ? "deprecated" : (l3 = e.required) != null && l3.includes(n2) ? "required" : "optional";
      }
    ), i3 = ["required", "optional", "deprecated"];
    return ae.jsx(t2, { className: "divide-y overflow-hidden", children: i3.map(
      (n2) => r[n2] && ae.jsx("ul", { className: "divide-y", children: r[n2].map(([o, l3]) => ae.jsx(
        ue,
        {
          name: o,
          schema: l3,
          group: n2,
          defaultOpen: t3
        },
        o
      )) }, n2)
    ) });
  }
  return e.additionalProperties ? ae.jsxs(t2, { className: "my-2", children: [
    ae.jsx(i, { children: ae.jsx(m, { children: "Additional Properties:" }) }),
    ae.jsx(n, { children: ae.jsx(x, { schema: e.additionalProperties }) })
  ] }) : null;
};

export {
  we,
  te,
  j,
  y,
  N,
  x
};
//# sourceMappingURL=chunk-LKCT2PAX.js.map
