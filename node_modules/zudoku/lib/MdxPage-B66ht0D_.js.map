{"version":3,"file":"MdxPage-B66ht0D_.js","sources":["../src/lib/plugins/markdown/MdxPage.tsx"],"sourcesContent":["import { useMDXComponents } from \"@mdx-js/react\";\nimport slugify from \"@sindresorhus/slugify\";\nimport { Helmet } from \"@zudoku/react-helmet-async\";\nimport { type PropsWithChildren, useEffect } from \"react\";\nimport { CategoryHeading } from \"../../components/CategoryHeading.js\";\nimport { Heading } from \"../../components/Heading.js\";\nimport { ProseClasses } from \"../../components/Markdown.js\";\nimport { Pagination } from \"../../components/Pagination.js\";\nimport { Toc } from \"../../components/navigation/Toc.js\";\nimport {\n  useCurrentItem,\n  usePrevNext,\n} from \"../../components/navigation/utils.js\";\nimport type { MdxComponentsType } from \"../../util/MdxComponents.js\";\nimport { cn } from \"../../util/cn.js\";\nimport { type MarkdownPluginDefaultOptions, type MDXImport } from \"./index.js\";\n\ndeclare global {\n  interface Window {\n    __getReactRefreshIgnoredExports?: (args: {\n      id: string;\n    }) => string[] | undefined;\n  }\n}\n\nconst MarkdownHeadings = {\n  h2: ({ children, id }) => (\n    <Heading level={2} id={id} registerSidebarAnchor>\n      {children}\n    </Heading>\n  ),\n  h3: ({ children, id }) => (\n    <Heading level={3} id={id} registerSidebarAnchor>\n      {children}\n    </Heading>\n  ),\n} satisfies MdxComponentsType;\n\nexport const MdxPage = ({\n  mdxComponent: MdxComponent,\n  file,\n  frontmatter = {},\n  defaultOptions,\n  tableOfContents,\n  excerpt,\n}: PropsWithChildren<\n  Omit<MDXImport, \"default\"> & {\n    file: string;\n    mdxComponent: MDXImport[\"default\"];\n    defaultOptions?: MarkdownPluginDefaultOptions;\n  }\n>) => {\n  const categoryTitle = useCurrentItem()?.categoryLabel;\n\n  const title = frontmatter.title;\n  const category = frontmatter.category ?? categoryTitle;\n  const hideToc = frontmatter.toc === false || defaultOptions?.toc === false;\n  const pageTitle =\n    tableOfContents.find((item) => item.depth === 1)?.value ?? title;\n  const hidePager =\n    frontmatter.disablePager ?? defaultOptions?.disablePager ?? false;\n\n  const tocEntries =\n    tableOfContents.find((item) => item.depth === 1)?.children ??\n    // if `title` is provided by frontmatter it does not appear in the table of contents\n    tableOfContents.filter((item) => item.depth === 2);\n\n  const showToc = !hideToc && tocEntries.length > 0;\n\n  const { prev, next } = usePrevNext();\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === \"development\") {\n      window.__getReactRefreshIgnoredExports = ({ id }) => {\n        if (!id.endsWith(file)) return;\n\n        return [\"frontmatter\", \"tableOfContents\"];\n      };\n\n      return () => {\n        window.__getReactRefreshIgnoredExports = undefined;\n      };\n    }\n  }, [file]);\n\n  return (\n    <div\n      className=\"grid grid-cols-1 xl:grid-cols-[--sidecar-grid-cols] gap-8 justify-between\"\n      data-pagefind-filter=\"section:markdown\"\n      data-pagefind-meta=\"section:markdown\"\n    >\n      <Helmet>\n        <title>{pageTitle}</title>\n        {excerpt && <meta name=\"description\" content={excerpt} />}\n      </Helmet>\n      <div\n        className={cn(\n          ProseClasses,\n          \"max-w-full xl:w-full xl:max-w-3xl flex-1 flex-shrink pt-[--padding-content-top]\",\n        )}\n      >\n        {(category || title) && (\n          <header>\n            {category && <CategoryHeading>{category}</CategoryHeading>}\n            {title && (\n              <Heading level={1} id={slugify(title)}>\n                {title}\n              </Heading>\n            )}\n          </header>\n        )}\n        <MdxComponent\n          components={{ ...useMDXComponents(), ...MarkdownHeadings }}\n        />\n        {!hidePager && (\n          <>\n            <hr className=\"my-10\" />\n            <Pagination\n              prev={prev ? { to: prev.id, label: prev.label } : undefined}\n              next={next ? { to: next.id, label: next.label } : undefined}\n              className=\"mb-4\"\n            />\n          </>\n        )}\n      </div>\n      <div className=\"hidden xl:block\">\n        {showToc && <Toc entries={tocEntries} />}\n      </div>\n    </div>\n  );\n};\n"],"names":["MarkdownHeadings","children","id","jsx","Heading","MdxPage","MdxComponent","file","frontmatter","defaultOptions","tableOfContents","excerpt","categoryTitle","_a","useCurrentItem","title","category","hideToc","pageTitle","_b","item","hidePager","tocEntries","_c","showToc","prev","next","usePrevNext","useEffect","jsxs","Helmet","cn","ProseClasses","CategoryHeading","slugify","useMDXComponents","Fragment","Pagination","Toc"],"mappings":"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"}