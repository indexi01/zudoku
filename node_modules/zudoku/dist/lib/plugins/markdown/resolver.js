const DEFAULT_DOCS_FILES = "/pages/**/*.{md,mdx}";
/**
 * Utilities for resolving markdown file paths and routes
 */
export class DocResolver {
    config;
    constructor(config) {
        this.config = config;
    }
    fileMap = new Map();
    /**
     * Gets the default docs config from the zudoku config
     */
    getDocsConfigs() {
        const docsConfigs = this.config.docs
            ? Array.isArray(this.config.docs)
                ? this.config.docs
                : [this.config.docs]
            : [{ files: DEFAULT_DOCS_FILES }];
        return docsConfigs;
    }
    /**
     * Gets the root directory from a files glob
     */
    static getRootDir(filesGlob) {
        let rootDir = filesGlob.split("**")[0];
        if (!rootDir) {
            throw new Error("Invalid files glob. Must have '**' in the path.");
        }
        rootDir = rootDir.replace("/**", "/");
        return rootDir;
    }
    /**
     * Resolves the route path for a given file system path
     * @param options - The options to resolve the route path
     * @returns The string route path
     */
    static resolveRoutePath({ filesGlob, fsPath, }) {
        const rootDir = this.getRootDir(filesGlob);
        const re = new RegExp(`^${rootDir}(.*).mdx?`);
        const match = fsPath.match(re);
        const routePath = match?.at(1);
        return routePath;
    }
}
//# sourceMappingURL=resolver.js.map