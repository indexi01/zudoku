import { useMemo } from "react";
import { create } from "zustand";
import { persist } from "zustand/middleware";
export const useSelectedServerStore = create()(persist((set) => ({
    selectedServer: undefined,
    setSelectedServer: (newServer) => set({ selectedServer: newServer }),
}), { name: "zudoku-selected-server" }));
/**
 * Simple wrapper for `useSelectedServerStore` to fall back to first of the provided servers
 */
export const useSelectedServer = (servers) => {
    const { selectedServer, setSelectedServer } = useSelectedServerStore();
    const finalSelectedServer = useMemo(() => selectedServer && servers.some((s) => s.url === selectedServer)
        ? selectedServer
        : (servers.at(0)?.url ?? ""), [selectedServer, servers]);
    return { selectedServer: finalSelectedServer, setSelectedServer };
};
//# sourceMappingURL=state.js.map