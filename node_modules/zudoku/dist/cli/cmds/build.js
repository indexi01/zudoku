import { build } from "../build/handler.js";
import { captureEvent } from "../common/analytics/lib.js";
import { DEFAULT_PREVIEW_PORT } from "../preview/handler.js";
export default {
    desc: "Build",
    command: "build",
    builder: (yargs) => yargs
        .option("dir", {
        type: "string",
        describe: "The directory containing your project",
        default: ".",
        normalize: true,
        hidden: true,
    })
        .option("preview", {
        describe: "Preview the build after completion (optionally with a custom port)",
        coerce: (value) => {
            if (typeof value === "number")
                return value;
            if (value === true)
                return DEFAULT_PREVIEW_PORT;
            return undefined;
        },
    }),
    handler: async (argv) => {
        process.env.NODE_ENV = "production";
        await captureEvent({ argv, event: "zudoku build" });
        await build(argv);
    },
};
//# sourceMappingURL=build.js.map